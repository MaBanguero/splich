<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Cutter</title>
    <script>
        function downloadAndCleanup(segment) {
            var link = document.createElement('a');
            link.href = '/download/' + segment;
            link.download = segment;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function downloadAll(segments) {
            segments.forEach(segment => {
                downloadAndCleanup(segment);
            });
        }
    </script>
</head>
<body>
    <h1>Sube tu video para cortarlo en segmentos</h1>
    <form method="post" enctype="multipart/form-data">
        <input type="file" name="video" accept="video/*" required>
        <label for="duration">Duraci√≥n del segmento (segundos):</label>
        <input type="number" name="duration" id="duration" min="1" required>
        <button type="submit">Subir Video</button>
    </form>

    {% if segments %}
        <h2>Segmentos de Video</h2>
        <ul id="segment-list">
            {% for segment in segments %}
                <li>
                    {{ segment }}
                    <a href="/download/{{ segment }}">Descargar Manualmente</a>
                </li>
            {% endfor %}
        </ul>
        <script>
            var segments = [
                {% for segment in segments %}
                    "{{ segment }}",
                {% endfor %}
            ];
            downloadAll(segments);
        </script>
    {% endif %}
</body>
</html>
