<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Cutter</title>
    <script>
        function downloadAndCleanup(segment) {
            var link = document.createElement('a');
            link.href = '/download/' + segment;
            link.download = segment;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function downloadAll(segments) {
            segments.forEach(segment => {
                downloadAndCleanup(segment);
            });
        }
    </script>
</head>
<body>
    <h1>Sube tu video para cortarlo en segmentos</h1>
    <form method="post" enctype="multipart/form-data">
        <input type="file" name="video" accept="video/*" required><br><br>
        <label for="duration">Duración del segmento (segundos):</label>
        <input type="number" name="duration" id="duration" min="1" required><br><br>
        <label for="inicio">Video de inicio (opcional):</label>
        <input type="file" name="inicio" accept="video/*"><br><br>
        <label for="final">Video de final (opcional):</label>
        <input type="file" name="final" accept="video/*"><br><br>
        <button type="submit">Subir Video</button>
    </form>

    {% if video %}
        <h2>Video Segmentado</h2>
        <a href="/download/{{ video }}">Descargar Video Segmentado</a>
        <video controls>
            <source src="{{ url_for('static', filename='uploads/' ~ video) }}" type="video/mp4">
            Tu navegador no soporta la reproducción de videos.
        </video>
    {% endif %}
</body>
</html>
